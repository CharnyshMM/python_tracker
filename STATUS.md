# Разработка "Трекера дел". Отчет

## 1. Аналоги


### 1) Wunderlist

Достоинства:

- списки дел, возможны заметки
- регистрация пользователя
- можно группировать в папки
- можно добавлять #тэги и искать дела по ним сразу в нескольких списках
- можно Share: делиться с другими пользователями, отправлять приглашения
- можно оставлять комментарии под листом дел (обсуждать с теми, кому это лист виден)
- можно получать автоматически to-do из простого письма, пересылая на свой аккаунт

Недостатки:

 - только один тип приоритета.

### 2) Todoist

Достоинства:

- быстрый ввод -- т.е. просто вводишь строку, а он находит в ней нужные данные(время, дату)
- работа в команде, можно назначать задания
- уровни важности(много) с выделением цвета
- работа с Dropbox, Google Drive (присоединяет файлы)
- тоже фильтры, команды людей, работа с почтой 
- просмотр "Кармы" (визуализация эффективности)
- креативно выполнен
- есть @labels, есть проекты. 

Для некоторых вещей нужна платная версия

### 3) Google Calendar

Достоинства:

- универсальный, с хорошим вэб-интерфейсом. Интеграция с любым приложением, поддерживающим импорт из онлайн-календаря
- аккаунт в Google позволяет синхронизировать напоминания
- календарь из нескольких тематических каледарей
- умный быстрый ввод
- всевозможные режимы напоминаний
- приглашения по почте, спициальные встречи, которые можно назначать только в определенное время
- много визульных фишек


Недостатки:

- не всегда удобно создавать мероприятия
- на мероприятия можно пригласить, но обсудить-прокомментировать в календаре нельзя

### 4) Bitbucket Issue Tracker

Достоинства:

 - управление при помощи сообщения при коммите (есть набор команд, номера задач как #3)
 - есть приоритет, есть типы
 - 2 статуса выполнения
 - есть возможность проголосовать, следить за изменениями события
 - возможность скопировать/перенести состояние трекера из одного репозитория в другой
 - в описаниях поддерживает Markdowd и быстрые ссылки на другие записи в трекере

Недостатки:

 - неудобно будет работать при большом числе людей
 - очень не хватает возможностей отображения и фильтров
 - только один приоритет
 - он как смесь чата и списка дел со статусом выполнения
 - мало возможностей разделения дел, по сути один список.

###5) Trello

Достоинства:

 - есть вкладка на Bitbucket
 - есть доски с отображением дел по спискам
 - есть быстрые комментарии, есть метки
 - есть прогресс выполнения на основе подсписка дел- Checklist, отдельный пункт Активность
 - можно копировать/перемещать дела между списками
 - возможности работы по email
 - красиво оформлен
 - работа в команде - дополнительное разделение, профиль команды со своими досками и списками
 - комментарии

Недостатки:

 - только назначение Due Date 
 - приоритеты дел только внутри списка


+Очень хороший образец для будущей разработки.

###6) Jira

Достоинства:

 - работа с Bitbucket из Jira
 - работа с Jira из Bitbucket 
 - нацелен на работу с проектом и командой разработчиков
 - Board - кроме фильтров, все логично расположенов списках(желательно так и сделать в нашем трекере)
 - отображение прогресса
 - все, что есть в Bitbucket Issue Tracker

Платно полностью, только 7 дней попробовать.

## 2. Сценарии использования

**1) Организация рабочего процесса в учреждении:**

Каждый работник может вести свои списки дел, должен вести открытый для начальника список заданий, над которыми работает. Начальник в этом списке может создавать задачи для работника, назначать сроки. Начальник ведет общий для всех список совещаний, встреч, дежурств. Всем обо всем приходят уведомления по почте.

**2) Разработка программного проекта:**

Видный всем список того, что нужно сделать. Каждое дело - создать GUI, создать базу данных, создать интерацию с почтовым сервисом, рекламная кампания или работа с заказчиком. Глава каждого отдела ведет подсписок дел в задаче для своего отдела. К примеру, в "Создать GUI":




    1. Разработать основные диалоги
     		- работникам Васе, Жене
     		- до 20.03
    2. Продумать состав меню
    	 	- работникам Кате, Коле
    	 	- до 19.03
    
   А работники, в свою очередь, ведут свой подсписок дел:


     1. Разработать основные диалоги:
    	   [- работникам Васе, Жене]
    	   [- до 20.03             ]
    	   Нужно:
              1) Продумать регистрацию
    	    	 - 2 дня
    	    	 - Вася рисует, Женя дополняет
    	  	  2) Продумать окно входа
    	     	- 2 дня
    		 	- Женя рисует, Вася дополняет
         
У каждого дела можно иметь процент выполнения, по крайней мере у корневого.

**3) Распланировать день и найти время для отдыха:**

Можно в программе при создании очередной записи с категорией "Отдых" предлагать свободное на текущий день время в графике.

**4) Важность пометок-тэгов:**

Удобно пометить некоторые дела, находящиеся в независимых списках "Список покупок", "Список на выходные", меткой "#домашние" или "#для_командировки". И, если понадобится узнать, все ли учтено для сбора в командировку, достаточно будет показать все, что с соответствующим тэгом. И, в то же время, придя в магазин, открыв единственный список покупок, можно будет видеть только то, что связано с покупками, без лишних переходов между списками или напоминаний.

**5) Многопользовательская работа**  

У каждой задачи, у списка есть АВТОР и ЗАИНТЕРИСОВАННЫЕ. Автор, создавая или редактируя задачи, добавляет других людей, которых наделяет правами на определнные изменения (или только на просмотр). 
Начальник добавляет подчиненных, они не могут изменять запланированное время окончания задачи, но могут изменять статус выполнения.

**6) Визуализация задач**  

Чтобы видеть свои списки запланированных дел, например, для каждого проекта, с которым работаешь. Так же отдельным режимом отслеживать выполнение задач, изображать задачи относительно оси времени. 
Имея список дел от начальника, построить и распечатать на бумаге диаграмму Гантта на месяц.

**7) Удобство и легкость**  

Если нужно быстро создать новую задачу, есть общая кнопка "Создать". И, если нет времени настравать множество параметров, задать только пункты "Время напоминания", "Приоритет". Или же, если нужны точные настройки, то есть возможность развернуть окно настройки и установить их.

**8) Разная важность задач**  

Пометить первой категорией важности задачу "Выспаться", назначить ее время начала - 24:00 до 6:00 ежедневно. На неделю - задача "Сделать STATUS.md". Ее категория важности 2. Параллельно может быть задача "Прочитать книгу". Ее важность, например, 5 категория. И в ежедневной повестке дня задачи будут распределены по убыванию приоритета. А после 24:00 задача "выспаться" будет появляться, как самая важная. И нельзя будет поместить (без снятия задачи "Выспаться") ничего, кроме задачи аналогичной важности на время 24:00 - 6:00. Обо всех пересечениях/наложениях программа предупредит перед окончательным добавлением нового события.

**9) Комментарии**  

Группа подчиненных выполняет задачу, созданную начальником. У одного из починенных появился вопрос, и он может задать его, написав комметарий под задачей. Он виден всем, и все смогут или ответить, или поддержать вопрос.

**10) Почта**  

 Для экономии трафика можно отправлять указание "Добавить задачу такую-то", "Задача такая-то выполнена" через почту, мессенджер


## 3. Планируемые возможности

####Система должна:

**1) Регистрация пользователей**  

- пользователи представляются системе своими именами, задачи имеют авторов и исполнителей, наблюдателей.

**2) Интерфейс**

-  Предоставлять удобный личный кабинет (личную страницу, dashboard).
- Личный кабинет показывает сводку на текущий день, отдельная область с напоминаниями о каких-то важных событиях.
- Возможность отобразить дерево дел.
- Визуализация, такая как диаграмма Гантта и т.д.
- предусмотреть быстрый и более насыщенный возможностями варианты работы с отдельными сущностями системы. Т.е., если нужно просто забить простое напоминание на вечер, то чтобы можно было ограничиться парой действий. А если нужны точные корректировки, то тогда надо перейти к расширенной настройке.
- простая и гибкая структура вэб-интерфейса (в т.ч. поддержка мобильных устройств)
- идея группировать списки в общую доску


**3) Списки из дел**

- Каждое дело имеет свои подсписки. Нужно уметь разделять дела на категории, наделять приоритетом, опционально добавлять метки.
- Должен быть доступен просмотр и выборка по любому аттрибуту.

**4) Возможность напоминаний**

 - Причем чтобы напоминания могли быть установлены на любое удобное время и в любой форме. Например, Напоминания в iOS не позволяют устанавливать несколько сигналов для одной записи, а Календарь в iOS не дает точно настроить время (только промежутки за 30 минут, за 1 час ...).

**5) Система приоритетов.**

 - Дела необходимо подразделять на важные, средней важности, второстепенные, неважные. Возможно как-то расширять эту характеристику. Например, при помощи хранения числовых коэффициентов внутри, позволить расставлять иерархию внутри конкретного списка.
 - приоритет должен учитываться при сортировке дел, составлении повестки дня, при выборе и назначении задач

**6) Дополнительные характеристики дел**

 - Надо иметь набор категорий, позволяющих оценивать "стоимость" определенной задачи (по ним высчитывать умный прогресс)
 - Необходимы легкие, независимые от других характеристик, тэги-метки. Их добавление должно быть простым, они должны помочь создать легковесные связи между задачами
 - статус, позволяющий разделять дела и следить за их состоянием (в работе, выполнено, отменено)

**7) Реализовать планы.**  

Автоматически создавать периодические или зависимые события. Планы должны создаваться легко. И быть гибкими.


**8) Иерархия**  

 Предполагается, что это будет сделано следующим образом.

- У списка дел есть создатель, список виден только ему. 
- Создатель может добавить пользователей. 
- Пользователь может быть наделенн правами просмотра, добавления новых дел в текущий список, изменения статуса дел, добавления списка подзадач к какому-то определенному делу.
- Нужно организовать систему общения.
- У каждого списка дел как сущности в системе есть свой внутренний список пар {пользователь - его права}. У отдельной задачи пока можно не реализовывать какое-то разделение доступа. Редактировать может только создатель, а вот работать со списком подзадач - уже несколько определенных пользователей.

**9) Система общения и комментариев.**

 - Нужно сделать что-то, что поможет системе быть не только "надсмотрщиком". Комментарии помогут вести отчетность и уточнять/оговаривать условия, не выходя за рамки системы. 


**10) Управление с помощью общения**

 - Получение от связи с электронной почтой чего-то больше, чем напоминания. Нужно создать несложную форму запросов к трекеру через письма. Тем более, что это уже есть у аналогов.
 - мессенджер Телеграм, предоставляет свободный интерфейс для создания ботов, можно попробовать вести информирование и базовые операции через специально сделанного бота.


**11) Импорт/экспорт**

 - Попробовать сделать возможность импорта и/или экспорта в системы Google Calendar или Яндекс Календарь.
 - Желательно иметь возможность экспортировать на для печати, и в JSON/ics для сторонней обработки





## 4. Логическая архитектура

####Основные единицы-сущности, с которыми будет работать программа:

**1. ЗАДАЧА**

- текст дела
- автор
- другие (пользователь, доступ) []
- ДатаВремя (просто все виды инфы, с ними связанные)
- ссылка на СПИСОК Задач, с которым связано дело
- тэги[]
- категории приоритета
- подсписок задач[]
- статус выполнения
- Блок комментариев

**2. ПЛАН**  

"Алгоритм, по которому в определенное время/срок создается дело в определенном списке"

- ссылка на владельца
- шаблон дела
- старт_поУсловию
- старт_периодически
- старт_поДате
- активен/неактивен

**3. ПОЛЬЗОВАТЕЛЬ**  

"Для работы в команде необходимо различать и наделять разными правами разных участников"

- имя, логин, пароль
- Доска_дел
- Управление доской дел()


**4. ГРУППЫ ДЕЛ**  

"Планируется реализовать их как #tags, и они могли бы давать возможность как-то группировать дела из разных списков, и не связывать в еще одни коллекции"

**5. КАТЕГОРИИ**  

- примерно как группы, но из фиксированного перечисления, в соответствии с которыми можно что-то дополнительно вычислять.
- категории могут отражать значимость дела в качестве части чего-то большего, объединяющего несколько дел. Как в трекерах задач выделяют milestone, issue, bug.

####Коллекции-Менеджеры:
**1. СПИСОК ЗАДАЧ**

- описание
- задача-родитель
- описание
- подзадачи[]  
- менеджер_событий
- менеджер_планов
- Добавить_задачу()
- Сортировать()
- Выборка тэгов()
- Найти, Изменить, Удалить ()
- Построить диаграмму Гантта() _вернуть список данных для нее_
- Построить иерархию вложенности() _json_


**2. ДОСКА ДЕЛ**  

"""панель-коллекция, как визуально, так и логически объединяющая списки дел"""

- ЗАДАЧИ []
- Добавить_объект()
- Найти, Изменить, Удалить()
- Выборка тэгов()
- Сортировка()
- Сводка()
- Менеджер планов
- Менеджер_событий
- Инициализация из базы данных()

**3. МЕНЕДЖЕР ПЛАНОВ**

- ПЛАНЫ[]
- Менеджер_событий
- Добавить план()
- Найти, Изменить, Удалить ()
- Активировать/дезактивировать
- Выполнить_план() #создать задачу согласно плану

**4. МЕНЕДЖЕР СОБЫТИЙ**  

- очередь_событий[]
- ссылка на владельца
- Обновить Очередь()
- Послать сигнал()
- Внутренний контроль текущего времени()

**5. МЕНЕДЖЕР БАЗЫ ДАННЫХ**  
- извлечь()
- записать()
- записать_изменения()
- синхронизировать()

**6. МЕНЕДЖЕР СЕАНСА**  
- менеджер_БД
- менеджер_ГИ
- авторизация()
- ТекущийПользователь

**7. СИСТЕМА КОММЕНТАРИЕВ**  
"""проще реализовать как отдельный блок, который можно будет присоединять к какой-то другой сущности"""

- связный список комментариев[]
- ссылка на владельца
- Добавить коммернтарий()
- Удалить комментарий()

**8. МЕНЕДЖЕР ГИ**  
- Перейти_на() - открывает страницы, передает им данные

**9. ФОНОВЫЙ МЕНЕДЖЕР**  


####Части визуального интерфейса пользователя

**1. Окно_авторизации**
- ссылка на менеджер ГИ
- Обработать ввод()
- Вернуть данные()

**2. Визуальная Доска**
- ссылка на менеджер ГИ
- ссылка на ДОСКУ_ЗАДАЧ текущего пользователя
- Элементы:
    - создать
    - изменить
    - поле поиска
    - визуализировать
    - Визуальные списки задач, их элементы
    

**3. Окно создания**
- ссылка на менеджер ГИ
- ссылка на ДОСКУ_ЗАДАЧ текущего пользователя
- ЗАДАЧА, которая будет потом возвращена
- Элементы:
    - вкладки: Новая задача, Новый план
    - поля ввода и выбора
    - скрываемые дополнительные поля/кнопки настройки
- Создать()
- Отменить()

**Элемент - отдельная задача**
- компактное и четкое отображение информации
- возможность изменять статус перемещением отметки
- редактирование любой информации путем требования редактирования у отдельного поля

**4. Страница отображения диаграмм**
- ссылка на менеджер ГИ
- ссылка на ДОСКУ_ЗАДАЧ текущего пользователя
- список данных для визуализации

####Главные алгоритмы взаимодействия сущностей, графического интерфейса

**1. Начальная загрузка**
1) Создается _Менеджер сеанса_, который проводит авторизацию и подгрузку из БД, создает объект _ПОЛЬЗОВАТЕЛЬ_ (для текущего пользователя). Подается сигнал _Менеджеру ГИ_ для перехода на страницу пользователя, ожидание загрузки _ДОСКИ ЗАДАЧ_.

2) В объекте _ПОЛЬЗОВАТЕЛЬ_ его _ДОСКА ЗАДАЧ_ уже инициализирована, отображается визуально. По умолчанию отображаются корневые задачи, и их 1е подсписки. 

3) _МЕНЕДЖЕР СОБЫТИЙ_ _ДОСКИ ЗАДАЧ_ исходя из установок промежутков, подает _МЕНЕДЖЕРУ ГИ_ команды на отображение уведомлений.

4) Ожидается активность пользователя

**2. Создание события**
1) По нажатию кнопки "Создать" _Менеджер ГИ_ открывает _Окно Создания_, передает ему данные о будущем владельце сущности, которая будет создана.

2) Пользователь заполняет и настраивает событие/план.

3) По нажатию "ОК" _Окно создания_ заставляет _ДОСКУ ЗАДАЧ_ обработать добавление, передает _Менеджеру ГИ_ сигнал на переход на _Визуальную Доску_

4) В _ДОСКЕ ЗАДАЧ_ при добавлении задачи вызывается _Обновление_ у  _Менеджера событий_, он уточняет очередь событий. Передается сигнал _Менеджеру БД_, что произошли изменения.

5) Ожидается активность пользователя.

**3. Напоминания**  

Если пользователь зарегистрировался и создал свои задачи, то, при его выходе из системы их отслеживание не прекращается.

- _Фоновый Менеджер_ хранит в себе _ДОСКИ ЗАДАЧ_ пользователей, в каждой из которых _Менеджеры событий_ отследивают внутренние списки задач и подают сигналы о необходимости извещения. 
- По сигналу _Фоновый менеджер_ оправляет письмо-уведомление

**4. Обработка приоритета**  

Каждый раз при работе с любым списком задач порядок их показа и подачи напоминаний регулируется своим _Менеджером событий_ на каждом уромне иерархии, вплодь до _Доски Задач_. Каждый следующий формирует свой список на основе уже сформированных списков уровнем ниже.

**5. Работа с планами**
1) Для создания плана кликнуть "Создать"

2) Выбрать в _Окне создания_ вкладку планы, заполнить поля настройки плана

3) Нажать "ОК".

4) _Менеджер ГИ_ передаст команду _Доске Задач_, она обработает добавление плана к нужному списку.

5) У каждого списка есть свой _Менеджер планов_, который отвечает за их работу. Он хранит в себе все планы, следит за временем, условиями, которые соответствуют активным планам, и, когда наступает совпадение, выполняет действия. Например, создает задачу, и посылает на добавление в список.

**6. Метки-тэги**  

- в каждом списке есть функция "Выборка тэгов()", возвращает _Список задач_ из задач только с определенными метками.
- по клику "Поиск" производится обход всех списков для обнаружения введенных в поле поиска меток, строится список, выводится.

**7. Комментарии**
- комментарии - отдельный блок, присоединяемый к каждой задаче.  




## 5. Этапы разработки
1) Реализация основных сущностей в коде

2) "Оживление" программы. Написание 1го рабочего прототипа

- позволит простейшую регистрацию пользователей
- одному пользователю войти в систему и создавать задачи, списки, группы, добавлять к своим спискам уже зарегистрированных пользователей.   (Максимум: начать реализацию системы приоритетов)

3) Добавление системы напоминаний и работы в фоне. Работает система приоритетов. Усложнение базы данных.

4) Система комментариев к задачам и спискам

5) Полностью рабочая программа в командной строке.

6) Разработка веб-интерфейса.  
   (Максимум: сделать умную работу со входящими сообщениями на почту.  
   СуперМаксимум: Попробовать устроить уведомления и запросы через Телеграм)  


## 6. Сроки
 
 **1й** этап -- до 02.04  
 **2-4** этапы разработки -- до 30.04.  
 **5й** этап -- до 03.05  
 **6й** этап -- до 18.05   

## 7. Статус

 Заканчиваю анализ.
 Начинаю реализацию сущностей в коде(1 этап)
